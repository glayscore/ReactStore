{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\Admin\\\\Desktop\\\\Docs\\\\Web\\\\cg\\\\cg_panner\\\\src\\\\views\\\\services\\\\rotator\\\\index.tsx\";\nimport React, { useEffect, useRef } from 'react';\nimport { withRouter } from 'react-router-dom';\nimport * as THREE from 'three';\nimport * as dat from 'dat.gui';\nimport { OrbitControls } from 'three-orbitcontrols-ts';\nimport { OBJLoader2 } from 'three/examples/jsm/loaders/OBJLoader2';\nimport { createEquirectangularShader } from './shaders';\n\nclass ControlGui {\n  constructor() {\n    this._fov = 75;\n  }\n\n  get fov() {\n    return this._fov;\n  }\n\n  set fov(value) {\n    this._fov = value;\n  }\n\n}\n\n;\n\nconst Rotator = props => {\n  const mount = useRef(null);\n  useEffect(() => {\n    var _mount$current;\n\n    const controlGui = new ControlGui();\n    const gui = new dat.GUI();\n    gui.add(controlGui, 'fov', 0, 100);\n    const loader = new OBJLoader2();\n    const scene = new THREE.Scene();\n    const camera = new THREE.PerspectiveCamera(controlGui.fov, window.innerWidth / window.innerHeight, 0.1, 1000);\n    const renderer = new THREE.WebGLRenderer();\n    renderer.setSize(window.innerWidth, window.innerHeight);\n    renderer.setClearColor(0xffffff);\n    loader.load('/models/Sphere.obj', geometry => {\n      const texture = new THREE.TextureLoader().load('/images/Bathroom_Janis_Cam360_001.jpg');\n      const equirectangularShader = createEquirectangularShader(texture); // @ts-ignore\n\n      const mesh = geometry.getObjectByName('Sphere');\n      mesh.material = equirectangularShader;\n      mesh.scale.x = -0.1;\n      mesh.scale.y = 0.1;\n      mesh.scale.z = 0.1;\n      scene.add(geometry);\n    }, undefined, undefined, undefined);\n    camera.position.z = 0.3;\n    const controls = new OrbitControls(camera, renderer.domElement);\n\n    const animate = () => {\n      requestAnimationFrame(animate);\n      camera.fov = controlGui.fov;\n      camera.updateProjectionMatrix();\n      controls.update();\n      renderer.render(scene, camera);\n    };\n\n    animate();\n    (_mount$current = mount.current) === null || _mount$current === void 0 ? void 0 : _mount$current.appendChild(renderer.domElement);\n  }, []);\n  return /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(\"div\", {\n    ref: mount,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 77,\n      columnNumber: 13\n    }\n  }));\n};\n\nexport default withRouter(Rotator);","map":{"version":3,"sources":["C:/Users/Admin/Desktop/Docs/Web/cg/cg_panner/src/views/services/rotator/index.tsx"],"names":["React","useEffect","useRef","withRouter","THREE","dat","OrbitControls","OBJLoader2","createEquirectangularShader","ControlGui","_fov","fov","value","Rotator","props","mount","controlGui","gui","GUI","add","loader","scene","Scene","camera","PerspectiveCamera","window","innerWidth","innerHeight","renderer","WebGLRenderer","setSize","setClearColor","load","geometry","texture","TextureLoader","equirectangularShader","mesh","getObjectByName","material","scale","x","y","z","undefined","position","controls","domElement","animate","requestAnimationFrame","updateProjectionMatrix","update","render","current","appendChild"],"mappings":"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","sourcesContent":["import React, { useEffect, useRef } from 'react';\r\nimport { withRouter } from 'react-router-dom';\r\nimport * as THREE from 'three';\r\nimport * as dat from 'dat.gui';\r\nimport { OrbitControls } from 'three-orbitcontrols-ts';\r\nimport { OBJLoader2 } from 'three/examples/jsm/loaders/OBJLoader2';\r\nimport { createEquirectangularShader } from './shaders';\r\n\r\ninterface Props {\r\n}\r\n\r\nclass ControlGui {\r\n    private _fov: number = 75;\r\n\r\n    get fov(): number {\r\n        return this._fov;\r\n    }\r\n    set fov(value: number) {\r\n        this._fov = value;\r\n    }\r\n};\r\n\r\nconst Rotator = (props: Props) => {\r\n    const mount = useRef<HTMLDivElement>(null);\r\n\r\n    useEffect(() => {\r\n        const controlGui = new ControlGui();\r\n        const gui = new dat.GUI();\r\n        gui.add(controlGui, 'fov', 0, 100);\r\n\r\n        const loader = new OBJLoader2();\r\n\r\n        const scene = new THREE.Scene();\r\n        const camera = new THREE.PerspectiveCamera(\r\n            controlGui.fov, \r\n            window.innerWidth / window.innerHeight, \r\n            0.1,\r\n            1000,\r\n        );\r\n        const renderer = new THREE.WebGLRenderer();\r\n        renderer.setSize(window.innerWidth, window.innerHeight);\r\n        renderer.setClearColor(0xffffff);\r\n\r\n        loader.load('/models/Sphere.obj', (geometry) => {\r\n            const texture = new THREE.TextureLoader().load('/images/Bathroom_Janis_Cam360_001.jpg');\r\n            const equirectangularShader = createEquirectangularShader(texture);\r\n            // @ts-ignore\r\n            const mesh: THREE.Mesh = geometry.getObjectByName('Sphere');\r\n\r\n            mesh.material = equirectangularShader;\r\n            mesh.scale.x = -0.1;\r\n            mesh.scale.y = 0.1;\r\n            mesh.scale.z = 0.1;\r\n            scene.add(geometry);\r\n        }, undefined, undefined, undefined);\r\n    \r\n        camera.position.z = 0.3;\r\n\r\n        const controls = new OrbitControls(camera, renderer.domElement);\r\n\r\n        const animate = () => {\r\n            requestAnimationFrame(animate);\r\n            camera.fov = controlGui.fov;\r\n            \r\n            camera.updateProjectionMatrix();\r\n            controls.update();\r\n            renderer.render(scene, camera);\r\n        };\r\n\r\n        animate();\r\n\r\n        mount.current?.appendChild(renderer.domElement);\r\n    }, []);\r\n\r\n    return (\r\n        <>\r\n            <div ref={mount} />\r\n        </>\r\n    );\r\n};\r\n\r\nexport default withRouter(Rotator);\r\n"]},"metadata":{},"sourceType":"module"}