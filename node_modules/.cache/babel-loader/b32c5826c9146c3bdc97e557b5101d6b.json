{"ast":null,"code":"/* eslint-disable no-multi-str */\nimport * as THREE from 'three';\nexport const createEquirectangularShader = texture => new THREE.ShaderMaterial({\n  // side: THREE.BackSide,\n  uniforms: {\n    map: {\n      // @ts-ignore\n      type: 't',\n      value: texture\n    },\n    placement: {\n      // @ts-ignore\n      type: 'v3',\n      value: new THREE.Vector3()\n    }\n  },\n  vertexShader: '\\\r\n    varying vec3 worldPosition;\\n\\\r\n    void main () {\\n\\\r\n      vec4 p = vec4 (position, 1.0);\\n\\\r\n      worldPosition = (modelMatrix * p).xyz;\\n\\\r\n      gl_Position = projectionMatrix * modelViewMatrix * p;\\n\\\r\n  }',\n  fragmentShader: '\\\r\n    uniform sampler2D map;\\n\\\r\n    uniform vec3 placement;\\n\\\r\n    varying vec3 worldPosition;\\n\\\r\n    const float seamWidth = 0.01;\\n\\\r\n    void main () {\\n\\\r\n      vec3 R = worldPosition - placement;\\n\\\r\n      float r = length (R);\\n\\\r\n      float c = -R.y / r;\\n\\\r\n      float theta = acos (c);\\n\\\r\n      float phi = atan (R.x, -R.z);\\n\\\r\n      float seam = \\n\\\r\n        max (0.0, 20.0 - abs (R.x / r) / seamWidth) *\\n\\\r\n        clamp (1.0 + (R.z / r) / seamWidth, 0.0, 1.0);\\n\\\r\n      gl_FragColor = texture2D (map, vec2 (\\n\\\r\n        0.5 + phi / 6.2831852,\\n\\\r\n        theta / 3.1415926\\n\\\r\n      ), -2.0 * log2(1.0 + c * c) -12.3 * seam);\\n\\\r\n    }'\n});","map":{"version":3,"sources":["C:/Users/Admin/Desktop/Docs/Web/cg/cg_panner/src/views/services/rotator/shaders.ts"],"names":["THREE","createEquirectangularShader","texture","ShaderMaterial","uniforms","map","type","value","placement","Vector3","vertexShader","fragmentShader"],"mappings":"AAAA;AACA,OAAO,KAAKA,KAAZ,MAAuB,OAAvB;AAEA,OAAO,MAAMC,2BAA2B,GAAIC,OAAD,IAA4B,IAAIF,KAAK,CAACG,cAAV,CAAyB;AAC9F;AACAC,EAAAA,QAAQ,EAAE;AACRC,IAAAA,GAAG,EAAE;AACH;AACAC,MAAAA,IAAI,EAAE,GAFH;AAGHC,MAAAA,KAAK,EAAEL;AAHJ,KADG;AAMRM,IAAAA,SAAS,EAAE;AACT;AACAF,MAAAA,IAAI,EAAE,IAFG;AAGTC,MAAAA,KAAK,EAAE,IAAIP,KAAK,CAACS,OAAV;AAHE;AANH,GAFoF;AAc9FC,EAAAA,YAAY,EAAE;;;;;;IAdgF;AAqB9FC,EAAAA,cAAc,EAAE;;;;;;;;;;;;;;;;;;;AArB8E,CAAzB,CAAhE","sourcesContent":["/* eslint-disable no-multi-str */\r\nimport * as THREE from 'three';\r\n\r\nexport const createEquirectangularShader = (texture: THREE.Texture) => new THREE.ShaderMaterial({\r\n  // side: THREE.BackSide,\r\n  uniforms: {\r\n    map: {\r\n      // @ts-ignore\r\n      type: 't',\r\n      value: texture,\r\n    },\r\n    placement: {\r\n      // @ts-ignore\r\n      type: 'v3',\r\n      value: new THREE.Vector3(),\r\n    }\r\n  },\r\n  vertexShader: '\\\r\n    varying vec3 worldPosition;\\n\\\r\n    void main () {\\n\\\r\n      vec4 p = vec4 (position, 1.0);\\n\\\r\n      worldPosition = (modelMatrix * p).xyz;\\n\\\r\n      gl_Position = projectionMatrix * modelViewMatrix * p;\\n\\\r\n  }',\r\n  fragmentShader: '\\\r\n    uniform sampler2D map;\\n\\\r\n    uniform vec3 placement;\\n\\\r\n    varying vec3 worldPosition;\\n\\\r\n    const float seamWidth = 0.01;\\n\\\r\n    void main () {\\n\\\r\n      vec3 R = worldPosition - placement;\\n\\\r\n      float r = length (R);\\n\\\r\n      float c = -R.y / r;\\n\\\r\n      float theta = acos (c);\\n\\\r\n      float phi = atan (R.x, -R.z);\\n\\\r\n      float seam = \\n\\\r\n        max (0.0, 20.0 - abs (R.x / r) / seamWidth) *\\n\\\r\n        clamp (1.0 + (R.z / r) / seamWidth, 0.0, 1.0);\\n\\\r\n      gl_FragColor = texture2D (map, vec2 (\\n\\\r\n        0.5 + phi / 6.2831852,\\n\\\r\n        theta / 3.1415926\\n\\\r\n      ), -2.0 * log2(1.0 + c * c) -12.3 * seam);\\n\\\r\n    }',\r\n});\r\n"]},"metadata":{},"sourceType":"module"}